# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –í–§–°

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è Open Web UI**  
*–í–µ—Ä—Å–∏—è: 1.0.0 | –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2024-08-03*

---

## üéØ –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å—Ö–µ–º–∞
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Open Web UI Frontend                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                     Chat Interface                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ            –í–§–° Command Parser                   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ     /vfs, /project, /file, /template            ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                            ‚îÇ                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                 VFS Plugin Layer                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  VFS Plugin     ‚îÇ  ‚îÇ  Integrated VFS Core       ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (Commands)     ‚îÇ  ‚îÇ  (Storage & Logic)         ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                            ‚îÇ                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                Storage Adapter                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  openWebUI      ‚îÇ  ‚îÇ  Fallback Storage          ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Storage API    ‚îÇ  ‚îÇ  (localStorage/Memory)     ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Data Storage                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Browser       ‚îÇ  ‚îÇ          Server Side            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   localStorage  ‚îÇ  ‚îÇ     (if Storage API exists)     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ vfs_projects/   ‚îÇ  ‚îÇ  /app/backend/data/vfs/         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ vfs_meta/       ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ projects/                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ vfs_system_     ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ templates/                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ     state       ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ cache/                     ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. **VFS Plugin (`openwebui_vfs_plugin.js`)**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–º–∞–Ω–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Open Web UI

```javascript
class VFSPlugin {
    constructor() {
        this.name = 'Virtual File System';
        this.version = '1.0.0';
        this.vfs = null;
        this.commands = {
            '/vfs': this.handleVFSCommand,
            '/project': this.handleProjectCommand,
            '/file': this.handleFileCommand,
            '/template': this.handleTemplateCommand,
            '/export': this.handleExportCommand,
            '/import': this.handleImportCommand
        };
    }
}
```

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –≤ Open Web UI
- –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–º–∞–Ω–¥
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 2. **Integrated VFS Core (`openwebui_integrated_vfs.js`)**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

```javascript
class IntegratedVFS {
    constructor() {
        this.storage = new OpenWebUIStorageAdapter();
        this.activeProject = null;
        this.templates = this._initTemplates();
        this.settings = this._initSettings();
    }
}
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã:**
- `IntegratedVFS` - –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
- `Project` - –º–æ–¥–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
- `File` - –º–æ–¥–µ–ª—å —Ñ–∞–π–ª–∞
- `Directory` - –º–æ–¥–µ–ª—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è)

### 3. **Storage Adapter**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

```javascript
class OpenWebUIStorageAdapter {
    constructor() {
        this.storage = typeof openWebUI !== 'undefined' 
            ? openWebUI.storage 
            : this.fallbackStorage();
        this.prefix = 'vfs_projects/';
        this.metaPrefix = 'vfs_meta/';
    }
    
    fallbackStorage() {
        return {
            items: new Map(),
            async setItem(key, value) {
                this.items.set(key, JSON.stringify(value));
                // –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è localStorage
                localStorage.setItem(key, JSON.stringify(value));
            }
        };
    }
}
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### Project Data Structure
```json
{
  "name": "InstagramParser",
  "type": "python",
  "template": "instagram_parser",
  "created": 1690992000000,
  "modified": 1690995600000,
  "files": {
    "instagram_parser.py": "import requests\n# –∫–æ–¥ –ø–∞—Ä—Å–µ—Ä–∞...",
    "config.json": "{\"target\": \"user123\"}",
    "requirements.txt": "requests>=2.28.0\nbeautifulsoup4>=4.11.0"
  },
  "settings": {
    "pythonVersion": "3.9",
    "packages": ["requests", "beautifulsoup4"],
    "autoSave": true
  },
  "metadata": {
    "description": "–ü–∞—Ä—Å–µ—Ä Instagram –ø—Ä–æ—Ñ–∏–ª–µ–π",
    "tags": ["parser", "instagram", "automation"],
    "author": "VFS User"
  }
}
```

### System State Structure
```json
{
  "version": "1.0.0",
  "savedAt": 1690995600000,
  "activeProject": "InstagramParser",
  "projects": ["InstagramParser", "WeatherAPI", "ProjectDocs"],
  "settings": {
    "ui": {
      "theme": "dark",
      "fontSize": 14
    },
    "performance": {
      "cacheEnabled": true,
      "cacheSize": "50MB"
    }
  },
  "statistics": {
    "totalProjects": 3,
    "totalFiles": 12,
    "totalSize": 45678,
    "lastActive": 1690995600000
  }
}
```

### Template Structure
```json
{
  "instagram_parser": {
    "name": "Instagram Parser",
    "description": "–®–∞–±–ª–æ–Ω –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Instagram",
    "type": "python",
    "files": {
      "instagram_parser.py": "# Template content...",
      "config.json": "# Template config...",
      "requirements.txt": "# Template dependencies..."
    },
    "settings": {
      "pythonVersion": "3.9",
      "packages": ["requests", "beautifulsoup4", "selenium"],
      "autoSave": true
    }
  }
}
```

---

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
```mermaid
sequenceDiagram
    participant User
    participant Plugin
    participant VFS
    participant Storage
    participant Browser

    User->>Plugin: /project create MyProject default
    Plugin->>Plugin: Validate parameters
    Plugin->>VFS: createProject("MyProject", "default")
    VFS->>VFS: Load template "default"
    VFS->>VFS: Create project structure
    VFS->>Storage: saveProject(projectData)
    Storage->>Browser: localStorage.setItem("vfs_projects/MyProject", data)
    Browser-->>Storage: success
    Storage-->>VFS: success
    VFS-->>Plugin: projectCreated
    Plugin-->>User: ‚úÖ –ü—Ä–æ–µ–∫—Ç "MyProject" —Å–æ–∑–¥–∞–Ω
```

### 2. **–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**
```mermaid
sequenceDiagram
    participant User
    participant Plugin
    participant VFS
    participant Storage
    participant Browser

    User->>Plugin: /file read MyProject main.py
    Plugin->>Plugin: Parse command
    Plugin->>VFS: readFile("MyProject", "main.py")
    VFS->>Storage: loadProject("MyProject")
    Storage->>Browser: localStorage.getItem("vfs_projects/MyProject")
    Browser-->>Storage: projectData
    Storage-->>VFS: projectData
    VFS->>VFS: Extract file content
    VFS-->>Plugin: fileContent
    Plugin->>Plugin: Format response
    Plugin-->>User: üìñ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ main.py
```

### 3. **–≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞**
```mermaid
sequenceDiagram
    participant User
    participant Plugin
    participant VFS
    participant Storage
    participant Browser

    User->>Plugin: /export MyProject json
    Plugin->>VFS: exportProject("MyProject", "json")
    VFS->>Storage: loadProject("MyProject")
    Storage->>Browser: localStorage.getItem("vfs_projects/MyProject")
    Browser-->>Storage: projectData
    Storage-->>VFS: projectData
    VFS->>VFS: Serialize to JSON
    VFS->>Browser: Create download blob
    VFS-->>Plugin: exportData
    Plugin-->>User: üì¶ –ü—Ä–æ–µ–∫—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
```

---

## üîß API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### Command Interface
```typescript
interface VFSCommand {
    command: string;           // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (/project, /file, etc.)
    action: string;            // –î–µ–π—Å—Ç–≤–∏–µ (create, read, update, delete)
    parameters: string[];      // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥—ã
    context?: any;            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
}

interface VFSResponse {
    success: boolean;          // –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    data?: any;               // –î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞
    message?: string;         // –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    error?: string;           // –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
}
```

### Storage Interface
```typescript
interface StorageAdapter {
    // –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    setItem(key: string, value: any): Promise<boolean>;
    getItem(key: string): Promise<any>;
    removeItem(key: string): Promise<boolean>;
    keys(prefix?: string): Promise<string[]>;
    
    // –í–§–°-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    saveProject(name: string, data: ProjectData): Promise<boolean>;
    loadProject(name: string): Promise<ProjectData>;
    deleteProject(name: string): Promise<boolean>;
    listProjects(): Promise<ProjectMeta[]>;
}
```

### Project Interface
```typescript
interface ProjectData {
    name: string;
    type: string;
    template: string;
    created: number;
    modified: number;
    files: Record<string, string>;
    settings: ProjectSettings;
    metadata?: ProjectMetadata;
}

interface ProjectSettings {
    pythonVersion?: string;
    packages?: string[];
    autoSave?: boolean;
    [key: string]: any;
}

interface ProjectMetadata {
    description?: string;
    tags?: string[];
    author?: string;
    [key: string]: any;
}
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### 1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞**
```javascript
class InputValidator {
    static validateProjectName(name) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ –ø—Ä–æ–µ–∫—Ç–∞
        if (!name || name.length < 1 || name.length > 50) {
            throw new Error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞');
        }
        
        if (!/^[a-zA-Z0-9_\-]+$/.test(name)) {
            throw new Error('–ò–º—è –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã');
        }
        
        return true;
    }
    
    static validateFilePath(path) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
        if (path.includes('..') || path.includes('//')) {
            throw new Error('–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É');
        }
        
        return true;
    }
    
    static validateFileContent(content) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞
        if (content.length > 10 * 1024 * 1024) { // 10MB
            throw new Error('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π');
        }
        
        return true;
    }
}
```

### 2. **Sandbox —Ä–µ–∂–∏–º**
```javascript
class SecurityManager {
    constructor(config) {
        this.sandboxMode = config.sandbox_mode || true;
        this.allowedExtensions = config.allowed_extensions || ['.py', '.js', '.json', '.md'];
        this.maxFileSize = config.max_file_size || '10MB';
    }
    
    checkFileAccess(filePath) {
        if (this.sandboxMode) {
            const extension = filePath.split('.').pop();
            if (!this.allowedExtensions.includes(`.${extension}`)) {
                throw new Error(`–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ .${extension} –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ`);
            }
        }
        
        return true;
    }
}
```

### 3. **Rate Limiting**
```javascript
class RateLimiter {
    constructor() {
        this.requests = new Map();
        this.limits = {
            commands_per_minute: 60,
            projects_per_hour: 10,
            files_per_minute: 30
        };
    }
    
    checkRate(userId, action) {
        const key = `${userId}:${action}`;
        const now = Date.now();
        
        if (!this.requests.has(key)) {
            this.requests.set(key, []);
        }
        
        const requests = this.requests.get(key);
        const recentRequests = requests.filter(time => now - time < 60000); // –ü–æ—Å–ª–µ–¥–Ω—è—è –º–∏–Ω—É—Ç–∞
        
        if (recentRequests.length >= this.limits.commands_per_minute) {
            throw new Error('–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤');
        }
        
        requests.push(now);
        this.requests.set(key, requests);
        
        return true;
    }
}
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### 1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
```javascript
class CacheManager {
    constructor() {
        this.cache = new Map();
        this.cacheTimeout = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç
    }
    
    get(key) {
        const item = this.cache.get(key);
        if (item && Date.now() - item.timestamp < this.cacheTimeout) {
            return item.data;
        }
        
        this.cache.delete(key);
        return null;
    }
    
    set(key, data) {
        this.cache.set(key, {
            data: data,
            timestamp: Date.now()
        });
    }
    
    invalidate(pattern) {
        for (const key of this.cache.keys()) {
            if (key.includes(pattern)) {
                this.cache.delete(key);
            }
        }
    }
}
```

### 2. **Lazy Loading**
```javascript
class LazyLoader {
    constructor(vfs) {
        this.vfs = vfs;
        this.loadedProjects = new Set();
    }
    
    async loadProjectOnDemand(projectName) {
        if (this.loadedProjects.has(projectName)) {
            return this.vfs.projects[projectName];
        }
        
        const projectData = await this.vfs.storage.loadProject(projectName);
        if (projectData) {
            this.vfs.projects[projectName] = projectData;
            this.loadedProjects.add(projectName);
        }
        
        return projectData;
    }
}
```

### 3. **–ö–æ–º–ø—Ä–µ—Å—Å–∏—è –¥–∞–Ω–Ω—ã—Ö**
```javascript
class CompressionManager {
    static compress(data) {
        // –ü—Ä–æ—Å—Ç–∞—è —Å–∂–∞—Ç–∏–µ —á–µ—Ä–µ–∑ gzip –≤ –±—Ä–∞—É–∑–µ—Ä–µ
        const jsonString = JSON.stringify(data);
        
        // –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pako.js –∏–ª–∏ –¥—Ä—É–≥—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
        const compressed = btoa(jsonString); // Base64 –∫–∞–∫ –∑–∞–≥–ª—É—à–∫–∞
        
        return compressed;
    }
    
    static decompress(compressed) {
        const jsonString = atob(compressed);
        return JSON.parse(jsonString);
    }
}
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞

### 1. **–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**
```javascript
class Logger {
    constructor(level = 'INFO') {
        this.level = level;
        this.levels = {
            'DEBUG': 0,
            'INFO': 1,
            'WARN': 2,
            'ERROR': 3
        };
    }
    
    log(level, message, data = null) {
        if (this.levels[level] >= this.levels[this.level]) {
            const timestamp = new Date().toISOString();
            const logEntry = {
                timestamp,
                level,
                message,
                data
            };
            
            console.log(`[${timestamp}] ${level}: ${message}`, data || '');
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
            this.saveToStorage(logEntry);
        }
    }
    
    saveToStorage(entry) {
        const logs = JSON.parse(localStorage.getItem('vfs_logs') || '[]');
        logs.push(entry);
        
        // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 –∑–∞–ø–∏—Å–µ–π
        if (logs.length > 1000) {
            logs.splice(0, logs.length - 1000);
        }
        
        localStorage.setItem('vfs_logs', JSON.stringify(logs));
    }
}
```

### 2. **Health Check**
```javascript
class HealthChecker {
    static async runDiagnostics() {
        const results = {
            storage: await this.checkStorage(),
            memory: this.checkMemory(),
            performance: await this.checkPerformance(),
            data_integrity: await this.checkDataIntegrity()
        };
        
        return results;
    }
    
    static async checkStorage() {
        try {
            const testKey = 'vfs_health_test';
            const testData = { test: true, timestamp: Date.now() };
            
            localStorage.setItem(testKey, JSON.stringify(testData));
            const retrieved = JSON.parse(localStorage.getItem(testKey));
            localStorage.removeItem(testKey);
            
            return {
                status: 'OK',
                available_space: this.getStorageSize(),
                test_passed: retrieved.test === true
            };
        } catch (error) {
            return {
                status: 'ERROR',
                error: error.message
            };
        }
    }
    
    static checkMemory() {
        const used = performance.memory ? {
            used: performance.memory.usedJSHeapSize,
            total: performance.memory.totalJSHeapSize,
            limit: performance.memory.jsHeapSizeLimit
        } : { status: 'Not available' };
        
        return used;
    }
}
```

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø–ª–∞–≥–∏–Ω—ã

### 1. **Plugin Architecture**
```javascript
class PluginManager {
    constructor(vfs) {
        this.vfs = vfs;
        this.plugins = new Map();
        this.hooks = new Map();
    }
    
    registerPlugin(plugin) {
        if (plugin.name && plugin.version) {
            this.plugins.set(plugin.name, plugin);
            
            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è hooks
            if (plugin.hooks) {
                for (const [event, handler] of Object.entries(plugin.hooks)) {
                    this.addHook(event, handler);
                }
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
            if (plugin.initialize) {
                plugin.initialize(this.vfs);
            }
            
            return true;
        }
        
        return false;
    }
    
    addHook(event, handler) {
        if (!this.hooks.has(event)) {
            this.hooks.set(event, []);
        }
        
        this.hooks.get(event).push(handler);
    }
    
    async triggerHook(event, data) {
        if (this.hooks.has(event)) {
            const handlers = this.hooks.get(event);
            
            for (const handler of handlers) {
                try {
                    await handler(data);
                } catch (error) {
                    console.error(`Hook error for ${event}:`, error);
                }
            }
        }
    }
}
```

### 2. **Custom Templates System**
```javascript
class TemplateManager {
    constructor() {
        this.templates = new Map();
        this.customTemplates = new Map();
    }
    
    registerTemplate(name, template) {
        if (this.validateTemplate(template)) {
            this.customTemplates.set(name, {
                ...template,
                custom: true,
                registered_at: Date.now()
            });
            
            return true;
        }
        
        return false;
    }
    
    validateTemplate(template) {
        const required = ['name', 'description', 'type', 'files'];
        
        for (const field of required) {
            if (!template[field]) {
                throw new Error(`Template missing required field: ${field}`);
            }
        }
        
        return true;
    }
}
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### 1. **Usage Analytics**
```javascript
class AnalyticsManager {
    constructor() {
        this.metrics = new Map();
        this.startTime = Date.now();
    }
    
    trackCommand(command, parameters) {
        const metric = {
            command,
            parameters: parameters.length,
            timestamp: Date.now(),
            session_id: this.getSessionId()
        };
        
        this.addMetric('commands', metric);
    }
    
    trackProjectOperation(operation, projectName, success) {
        const metric = {
            operation,
            project: projectName,
            success,
            timestamp: Date.now()
        };
        
        this.addMetric('project_operations', metric);
    }
    
    getUsageReport() {
        const report = {
            session_duration: Date.now() - this.startTime,
            total_commands: this.getMetricCount('commands'),
            total_projects: this.getMetricCount('project_operations'),
            most_used_commands: this.getMostUsedCommands(),
            error_rate: this.getErrorRate()
        };
        
        return report;
    }
}
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### 1. **Version Migration**
```javascript
class MigrationManager {
    constructor() {
        this.migrations = new Map();
        this.currentVersion = '1.0.0';
    }
    
    addMigration(fromVersion, toVersion, migrationFn) {
        const key = `${fromVersion}->${toVersion}`;
        this.migrations.set(key, migrationFn);
    }
    
    async migrateData(data, fromVersion, toVersion) {
        const migrationPath = this.findMigrationPath(fromVersion, toVersion);
        
        let currentData = data;
        for (const migration of migrationPath) {
            currentData = await migration(currentData);
        }
        
        return currentData;
    }
    
    findMigrationPath(from, to) {
        // –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
        const migrations = [];
        const key = `${from}->${to}`;
        
        if (this.migrations.has(key)) {
            migrations.push(this.migrations.get(key));
        }
        
        return migrations;
    }
}
```

---

*–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –í–§–° v1.0.0*  
*¬© 2024 Open Web UI VFS Architecture Team* 