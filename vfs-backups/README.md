# üîÑ VFS Auto Backup System

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Virtual File System (VFS) –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

VFS Auto Backup –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage –±—Ä–∞—É–∑–µ—Ä–∞ –≤ JSON —Ñ–∞–π–ª—ã –∏ –∫–æ–º–º–∏—Ç–∏—Ç –∏—Ö –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è.

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Open Web UI)
const vfsBackup = new VFSAutoBackup({
    debug: true,
    autoBackupEnabled: true,
    backupInterval: 15 * 60 * 1000 // 15 –º–∏–Ω—É—Ç
});
```

### –†—É—á–Ω–æ–π backup
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
vfsBackupNow();           // –°–æ–∑–¥–∞—Ç—å backup —Å–µ–π—á–∞—Å
vfsListBackups();         // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö backup'–æ–≤
```

### API Endpoints
```bash
# –°–æ–∑–¥–∞—Ç—å backup
POST /api/v1/vfs/backup
Content-Type: application/json
{
  "reason": "manual",
  "timestamp": "2024-08-05T12:30:00Z",
  "vfs_data": { ... }
}

# –°–ø–∏—Å–æ–∫ backup'–æ–≤
GET /api/v1/vfs/backups
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
vfs-backups/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ vfs-backup-2024-08-05T12-30-00.json
‚îú‚îÄ‚îÄ vfs-backup-2024-08-05T13-00-00.json
‚îî‚îÄ‚îÄ ...
```

## üìÑ –§–æ—Ä–º–∞—Ç backup —Ñ–∞–π–ª–∞

```json
{
  "timestamp": "2024-08-05T12:30:00.000Z",
  "backup_data": {
    "reason": "scheduled",
    "vfs_data": {
      "vfs_projects": { ... },
      "vfs_meta": { ... },
      "_metadata": {
        "extraction_time": "2024-08-05T12:30:00.000Z",
        "browser": "Mozilla/5.0...",
        "url": "http://localhost:3000",
        "storage_size": 1024
      }
    }
  },
  "metadata": {
    "version": "1.0",
    "source": "vfs-auto-backup"
  }
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –¢—Ä–∏–≥–≥–µ—Ä—ã backup'–∞
- **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏**: –∫–∞–∂–¥—ã–µ 15-30 –º–∏–Ω—É—Ç
- **–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**: `beforeunload` event
- **–ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞**: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏
- **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö**: debounced –Ω–∞ 5 —Å–µ–∫—É–Ω–¥

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```javascript
const config = {
    apiEndpoint: '/api/v1/vfs/backup',
    backupInterval: 30 * 60 * 1000,  // 30 –º–∏–Ω—É—Ç
    autoBackupEnabled: true,
    debug: false
};
```

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Open Web UI

1. –î–æ–±–∞–≤—å—Ç–µ `vfs_auto_backup.js` –≤ Open Web UI
2. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –Ω–∞–ª–∏—á–∏–µ VFS –¥–∞–Ω–Ω—ã—Ö
3. Backup'—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- Git –∫–æ–º–º–∏—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- –ù–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- localStorage –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç –≤–∞—à –∫–æ–Ω—Ç—Ä–æ–ª—å

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ backup'—ã
ls -la vfs-backups/ | tail -5

# –†–∞–∑–º–µ—Ä backup'–æ–≤
du -sh vfs-backups/

# Git –∏—Å—Ç–æ—Ä–∏—è backup'–æ–≤
git log --oneline --grep="VFS auto-backup"
```

## üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```javascript
// –ó–∞–≥—Ä—É–∑–∏—Ç—å backup –≤ VFS (–±—É–¥—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
async function restoreFromBackup(backupFile) {
    const response = await fetch(`/vfs-backups/${backupFile}`);
    const backup = await response.json();
    
    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ localStorage
    Object.entries(backup.backup_data.vfs_data).forEach(([key, value]) => {
        if (key.startsWith('vfs_')) {
            localStorage.setItem(key, JSON.stringify(value));
        }
    });
    
    location.reload(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å VFS
}
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–ß–∞—Å—Ç–æ—Ç–∞ backup'–æ–≤**: 15-30 –º–∏–Ω—É—Ç
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: –æ–±—ã—á–Ω–æ 1-10 KB
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Git)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ

---

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ VFS –¥–∞–Ω–Ω—ã—Ö –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤!** üöÄ 